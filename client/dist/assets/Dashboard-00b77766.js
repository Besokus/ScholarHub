import{c as v,r as i,N as q,a as P,j as e,m as n,b,C as Y,Q as Z,R as J,A as Q}from"./index-742c88f7.js";import{A as y}from"./arrow-right-797056f3.js";import{M as K,C as X}from"./message-circle-38b95ebc.js";import{C as ee}from"./clock-a684511e.js";import{C as te}from"./circle-check-135a219a.js";import{C as se}from"./cloud-upload-81968a74.js";import{T as ae}from"./trending-up-f6586554.js";import{D as ie}from"./download-e6b51e37.js";import{S as ne}from"./sparkles-9df1855e.js";import{A as oe}from"./index-7dbfdcd6.js";/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}]],le=v("bell-ring",re);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],ce=v("calendar",de);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=[["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}],["path",{d:"M15.947 12.65a4 4 0 0 0-5.925-4.128",key:"dpwdj0"}],["path",{d:"M13 22H7a5 5 0 1 1 4.9-6H13a3 3 0 0 1 0 6Z",key:"s09mg5"}]],xe=v("cloud-sun",me);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]],he=v("inbox",pe);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],B=v("moon",ue);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],G=v("sun",ge),be={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.1}}},k={hidden:{y:20,opacity:0,scale:.98},visible:{y:0,opacity:1,scale:1,transition:{type:"spring",stiffness:100,damping:20}},hover:{y:-5,transition:{duration:.3,ease:"easeOut"}}},I=({icon:r,text:o,actionText:h,actionLink:x})=>e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-400 py-6 min-h-[160px]",children:[e.jsx("div",{className:"p-3 bg-slate-50 rounded-full mb-3 ring-1 ring-slate-100",children:e.jsx(r,{size:24,className:"opacity-50"})}),e.jsx("span",{className:"text-sm font-medium text-slate-500",children:o}),h&&x&&e.jsxs(b,{to:x,className:"mt-2 text-xs font-semibold text-indigo-600 hover:text-indigo-700 flex items-center gap-1 group",children:[h," ",e.jsx(Y,{size:12,className:"group-hover:translate-x-0.5 transition-transform"})]})]}),ve=({username:r})=>{const[o,h]=i.useState(new Date);i.useEffect(()=>{const l=setInterval(()=>h(new Date),6e4);return()=>clearInterval(l)},[]);const x=i.useMemo(()=>{const l=o.getHours();let p="ä½ å¥½",d=G,c="text-amber-500";return l<5?(p="å¤œæ·±äº†",d=B,c="text-indigo-400"):l<11?(p="æ—©ä¸Šå¥½",d=G,c="text-amber-500"):l<18?(p="ä¸‹åˆå¥½",d=xe,c="text-orange-500"):(p="æ™šä¸Šå¥½",d=B,c="text-indigo-400"),{greeting:p,Icon:d,colorClass:c}},[o]),{Icon:A,greeting:T,colorClass:D}=x;return e.jsxs("div",{className:"relative mb-10 pt-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between gap-6",children:[e.jsxs("div",{children:[e.jsxs(n.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5},className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:`p-1.5 rounded-lg bg-white shadow-sm border border-slate-100 ${D}`,children:e.jsx(A,{size:16,strokeWidth:2.5})}),e.jsx("span",{className:"text-sm font-medium text-slate-500 tracking-wide uppercase",children:o.toLocaleDateString(void 0,{weekday:"long"})})]}),e.jsxs(n.h1,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1,duration:.5},className:"text-3xl md:text-4xl font-extrabold text-slate-900 tracking-tight",children:[T,"ï¼Œ",e.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-indigo-600 via-purple-600 to-indigo-600 bg-[length:200%_auto] animate-gradient",children:r||"åŒå­¦"}),e.jsx(n.span,{className:"inline-block ml-2 origin-bottom-right",animate:{rotate:[0,15,-5,15,0]},transition:{delay:.5,duration:1.5,repeat:0,repeatDelay:5},children:"ğŸ‘‹"})]}),e.jsx(n.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"mt-2 text-slate-500 max-w-lg",children:"å‡†å¤‡å¥½æ¢ç´¢ä»Šå¤©çš„çŸ¥è¯†äº†å—ï¼Ÿè¿™é‡Œæ˜¯æ‚¨çš„å­¦ä¹ æ§åˆ¶å°ã€‚"})]}),e.jsxs(n.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.3,type:"spring"},className:"hidden md:flex items-center gap-4 bg-white/60 backdrop-blur-md border border-white/50 p-3 rounded-2xl shadow-sm hover:shadow-md transition-shadow cursor-default group",children:[e.jsx("div",{className:"bg-indigo-50 text-indigo-600 p-3 rounded-xl group-hover:scale-110 transition-transform duration-300",children:e.jsx(ce,{size:24})}),e.jsxs("div",{className:"pr-4 border-r border-slate-200",children:[e.jsx("div",{className:"text-xs text-slate-400 font-semibold uppercase",children:"Today"}),e.jsxs("div",{className:"text-lg font-bold text-slate-800",children:[o.getDate(),"æ—¥"]})]}),e.jsxs("div",{className:"pr-2",children:[e.jsx("div",{className:"text-xs text-slate-400 font-semibold uppercase",children:"Time"}),e.jsx("div",{className:"text-lg font-bold text-slate-800 font-mono",children:o.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]})]}),e.jsx("div",{className:"absolute -top-20 -left-20 w-64 h-64 bg-indigo-500/5 rounded-full blur-3xl -z-10 pointer-events-none mix-blend-multiply"}),e.jsx("div",{className:"absolute top-10 right-20 w-72 h-72 bg-purple-500/5 rounded-full blur-3xl -z-10 pointer-events-none mix-blend-multiply"})]})};function Ce(){const r=localStorage.getItem("id")||"",[o,h]=i.useState(""),[x,A]=i.useState([]),[T,D]=i.useState([]),[l,p]=i.useState([]),[d,c]=i.useState(0),[E,$]=i.useState(0),[S,H]=i.useState([]),[z,V]=i.useState(!0);i.useEffect(()=>{const t=localStorage.getItem("username")||localStorage.getItem("fullName")||"åŒå­¦";h(t),(async()=>{var m;try{const[C,f,M,N]=await Promise.all([Z.list({my:!0,sort:"latest",page:1,pageSize:3}).catch(()=>({items:[]})),J.list({page:1,pageSize:50}).catch(()=>({items:[]})),q.unreadAnswers().catch(()=>({items:[]})),P.list({status:"unread",page:1,pageSize:5}).catch(()=>({items:[]}))]);A(C.items||[]),p(f.items||[]);const _=(f.items||[]).filter(s=>s.uploaderId===r);D(_);const a=(M.items||[]).map(s=>({id:s.id,type:"answer",title:s.title,createdAt:Number(s.createdAt||Date.now()),questionId:s.questionId})),j=(N.items||((m=N.Data)==null?void 0:m.items)||[]).map(s=>({id:s.id,type:"announcement",title:s.title,createdAt:new Date(s.publishAt).getTime(),severity:s.severity,pinned:!!s.pinned})),w=[...a,...j].sort((s,g)=>{const L=s.type==="announcement"&&s.pinned,O=g.type==="announcement"&&g.pinned;return L!==O?L?-1:1:g.createdAt-s.createdAt}).slice(0,3);H(w);try{const g=(await Q.me()).user||{};c(Number(g.uploads||0)),$(Number(g.downloads||0))}catch{}}finally{V(!1)}})();const F=setInterval(async()=>{var m;try{const[C,f]=await Promise.all([q.unreadAnswers().catch(()=>({items:[]})),P.list({status:"unread",page:1,pageSize:5}).catch(()=>({items:[]}))]),M=(C.items||[]).map(a=>({id:a.id,type:"answer",title:a.title,createdAt:Number(a.createdAt||Date.now()),questionId:a.questionId})),N=(f.items||((m=f.Data)==null?void 0:m.items)||[]).map(a=>({id:a.id,type:"announcement",title:a.title,createdAt:new Date(a.publishAt).getTime(),severity:a.severity,pinned:!!a.pinned})),_=[...M,...N].sort((a,j)=>{const w=a.type==="announcement"&&a.pinned,s=j.type==="announcement"&&j.pinned;return w!==s?w?-1:1:j.createdAt-a.createdAt}).slice(0,3);H(_)}catch{}},15e3),W=()=>{Q.stats().then(m=>{c(Number(m.uploads||0)),$(Number(m.downloads||0))}).catch(()=>{})};return window.addEventListener("SH_STATS_UPDATED",W),()=>{window.removeEventListener("SH_STATS_UPDATED",W),clearInterval(F)}},[r]);const R=i.useMemo(()=>({count:d,downloads:E}),[d,E]),U=i.useMemo(()=>(l||[]).filter(t=>t.uploaderId!==r).sort((t,u)=>(u.downloadCount||0)-(t.downloadCount||0)).slice(0,5),[l,r]);return e.jsxs(n.div,{initial:"hidden",animate:"visible",variants:be,className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-12",children:[e.jsx(ve,{username:o}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(n.div,{variants:k,whileHover:"hover",className:"bg-white rounded-[2rem] p-6 shadow-sm border border-slate-100/80 flex flex-col relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(y,{className:"text-slate-300",size:20})}),e.jsxs("div",{className:"flex items-center gap-3 mb-6 z-10",children:[e.jsx("div",{className:"p-3 bg-sky-50 text-sky-600 rounded-2xl shadow-inner",children:e.jsx(K,{size:22,strokeWidth:2.5})}),e.jsx("h3",{className:"font-bold text-slate-800 text-lg",children:"æˆ‘çš„æé—®"})]}),e.jsx("div",{className:"flex-1 flex flex-col z-10",children:z?e.jsx("div",{className:"space-y-3 animate-pulse",children:[1,2].map(t=>e.jsx("div",{className:"h-12 bg-slate-50 rounded-xl"},t))}):x.length>0?e.jsx("ul",{className:"space-y-3",children:x.slice(0,3).map(t=>e.jsx("li",{children:e.jsxs(b,{to:`/student/qa/${t.id}`,className:"block group/item p-3 rounded-2xl bg-slate-50/50 hover:bg-white border border-transparent hover:border-slate-100 hover:shadow-sm transition-all",children:[e.jsxs("div",{className:"flex justify-between items-start gap-3",children:[e.jsx("span",{className:"text-sm font-semibold text-slate-700 line-clamp-1 group-hover/item:text-indigo-600 transition-colors",children:t.title}),t.status==="open"?e.jsx("div",{className:"shrink-0 w-2 h-2 rounded-full bg-amber-400 mt-1.5 shadow-[0_0_8px_rgba(251,191,36,0.6)]"}):e.jsx("div",{className:"shrink-0 w-2 h-2 rounded-full bg-emerald-400 mt-1.5 shadow-[0_0_8px_rgba(52,211,153,0.6)]"})]}),e.jsxs("div",{className:"mt-2 text-xs text-slate-400 flex items-center gap-1.5",children:[t.status==="open"?e.jsx(ee,{size:12}):e.jsx(te,{size:12}),e.jsx("span",{children:t.status==="open"?"ç­‰å¾…å›å¤":"å·²è§£å†³"})]})]})},t.id))}):e.jsx(I,{icon:X,text:"æš‚æ— æé—®",actionText:"å»æé—®",actionLink:"/student/qa/new"})})]}),e.jsxs(n.div,{variants:k,whileHover:"hover",className:"bg-slate-900 rounded-[2rem] p-7 shadow-2xl text-white flex flex-col justify-between relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-[-50%] left-[-50%] w-[200%] h-[200%] bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-indigo-500/20 via-slate-900/0 to-transparent opacity-60 group-hover:opacity-100 transition-opacity duration-700"}),e.jsx("div",{className:"absolute -top-24 -right-24 w-64 h-64 bg-indigo-500/20 rounded-full blur-3xl animate-pulse",style:{animationDuration:"4s"}}),e.jsxs("div",{className:"flex items-center gap-4 relative z-10",children:[e.jsx("div",{className:"p-3 bg-white/10 rounded-2xl backdrop-blur-md border border-white/5 shadow-inner",children:e.jsx(se,{size:24,className:"text-indigo-200",strokeWidth:2.5})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-white text-lg tracking-wide",children:"æˆ‘çš„è´¡çŒ®"}),e.jsx("p",{className:"text-[10px] text-indigo-300 uppercase tracking-widest font-bold",children:"ScholarHub Impact"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-8 relative z-10",children:[e.jsxs("div",{className:"p-4 rounded-2xl bg-white/5 border border-white/5 backdrop-blur-sm hover:bg-white/10 transition-colors",children:[e.jsx("div",{className:"text-indigo-200/70 text-xs mb-1 font-medium uppercase tracking-wider",children:"Uploads"}),e.jsx("div",{className:"text-3xl font-bold font-mono tracking-tight text-white",children:R.count})]}),e.jsxs("div",{className:"p-4 rounded-2xl bg-white/5 border border-white/5 backdrop-blur-sm hover:bg-white/10 transition-colors",children:[e.jsx("div",{className:"text-indigo-200/70 text-xs mb-1 font-medium uppercase tracking-wider",children:"Downloads"}),e.jsx("div",{className:"text-3xl font-bold font-mono tracking-tight text-white",children:R.downloads})]})]}),e.jsxs(b,{to:"/student/resources/upload",className:"mt-8 flex items-center justify-between px-5 py-3.5 bg-indigo-600 hover:bg-indigo-500 rounded-xl text-sm font-bold transition-all group/btn relative z-10 shadow-lg shadow-indigo-900/40 border border-indigo-400/20",children:[e.jsx("span",{children:"åˆ†äº«æ–°èµ„æº"}),e.jsx(y,{size:18,className:"group-hover/btn:translate-x-1 transition-transform"})]})]}),e.jsxs(n.div,{variants:k,whileHover:"hover",className:"bg-white rounded-[2rem] p-6 shadow-sm border border-slate-100/80 flex flex-col relative group",children:[e.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(y,{className:"text-slate-300",size:20})}),e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-3 bg-orange-50 text-orange-600 rounded-2xl shadow-inner",children:e.jsx(ae,{size:22,strokeWidth:2.5})}),e.jsx("h3",{className:"font-bold text-slate-800 text-lg",children:"çƒ­é—¨èµ„æº"})]}),e.jsx("div",{className:"flex-1",children:z?e.jsx("div",{className:"space-y-4 animate-pulse",children:[1,2,3].map(t=>e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-slate-50 rounded-lg"}),e.jsx("div",{className:"h-8 w-32 bg-slate-50 rounded-lg"})]},t))}):U.length>0?e.jsx("ul",{className:"space-y-4",children:U.map((t,u)=>e.jsx("li",{children:e.jsxs(b,{to:`/student/resources/${t.id}`,className:"flex items-center gap-4 group/item cursor-pointer",children:[e.jsx("div",{className:`
                          w-8 h-8 rounded-xl flex items-center justify-center text-xs font-black shrink-0 transition-transform group-hover/item:scale-110 shadow-sm
                          ${u===0?"bg-amber-100 text-amber-600 ring-2 ring-amber-50":u===1?"bg-slate-100 text-slate-600":"bg-orange-50 text-orange-600"}
                        `,children:u+1}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-bold text-slate-700 truncate group-hover/item:text-indigo-600 transition-colors",title:t.title,children:t.title}),e.jsxs("div",{className:"text-xs text-slate-400 flex items-center gap-1 mt-1",children:[e.jsx(ie,{size:10,strokeWidth:2.5}),e.jsx("span",{className:"font-mono font-medium",children:t.downloadCount||0})]})]})]})},t.id))}):e.jsx(I,{icon:ne,text:"æš‚æ— çƒ­é—¨èµ„æº"})})]}),e.jsxs(n.div,{variants:k,whileHover:"hover",className:"bg-white rounded-[2rem] p-6 shadow-sm border border-slate-100/80 flex flex-col relative group",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-rose-50 text-rose-600 rounded-2xl shadow-inner",children:e.jsx(le,{size:22,strokeWidth:2.5})}),e.jsx("h3",{className:"font-bold text-slate-800 text-lg",children:"æ¶ˆæ¯"})]}),S.length>0&&e.jsxs("span",{className:"relative flex h-3 w-3",children:[e.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-rose-400 opacity-75"}),e.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-rose-500 shadow-lg shadow-rose-500/50"})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar pr-1 -mr-1",children:z?e.jsx("div",{className:"space-y-3 animate-pulse",children:[1,2].map(t=>e.jsx("div",{className:"h-14 bg-slate-50 rounded-xl"},t))}):S.length>0?e.jsx("ul",{className:"space-y-2",children:e.jsx(oe,{children:S.slice(0,3).map(t=>e.jsxs(n.li,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},className:"bg-white hover:bg-slate-50 p-3 rounded-2xl border border-slate-100 hover:border-slate-200 transition-all group/msg cursor-pointer shadow-sm hover:shadow-md",children:[e.jsxs("div",{className:"flex justify-between items-start mb-1.5",children:[e.jsx("div",{className:"flex items-center gap-1.5",children:t.type==="announcement"?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:`text-[10px] font-bold uppercase tracking-wider px-2 py-0.5 rounded-full ${t.severity==="EMERGENCY"?"bg-rose-50 text-rose-600":t.severity==="WARNING"?"bg-amber-50 text-amber-600":"bg-slate-50 text-slate-600"}`,children:"Announcement"}),t.pinned&&e.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider px-2 py-0.5 rounded-full bg-indigo-50 text-indigo-600",children:"ç½®é¡¶"})]}):e.jsx("span",{className:"text-[10px] font-bold text-rose-500 uppercase tracking-wider bg-rose-50 px-2 py-0.5 rounded-full",children:"New Answer"})}),e.jsx("span",{className:"text-[10px] text-slate-300 group-hover/msg:text-slate-400 transition-colors",children:"Now"})]}),e.jsx("div",{className:"text-sm font-semibold text-slate-700 line-clamp-1 mb-2 group-hover/msg:text-indigo-600 transition-colors",children:t.title}),t.type==="announcement"?e.jsxs(b,{to:`/student/announcements/${t.id}`,className:"flex items-center text-xs text-indigo-500 font-bold opacity-60 group-hover/msg:opacity-100 transition-all gap-1",children:["æŸ¥çœ‹å…¬å‘Š ",e.jsx(y,{size:10,className:"translate-x-0 group-hover/msg:translate-x-1 transition-transform"})]}):e.jsxs(b,{to:`/student/qa/${t.questionId}`,className:"flex items-center text-xs text-indigo-500 font-bold opacity-60 group-hover/msg:opacity-100 transition-all gap-1",children:["æŸ¥çœ‹å›å¤ ",e.jsx(y,{size:10,className:"translate-x-0 group-hover/msg:translate-x-1 transition-transform"})]})]},t.id))})}):e.jsx(I,{icon:he,text:"æ²¡æœ‰æ–°æ¶ˆæ¯"})})]})]})]})}export{Ce as default};
