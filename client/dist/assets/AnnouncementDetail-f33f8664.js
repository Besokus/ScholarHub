import{l as u,r,j as s,a as c}from"./index-742c88f7.js";import{P as g,C as f}from"./Card-80a76d03.js";function b(){const{id:t}=u(),[e,i]=r.useState(null),[l,x]=r.useState(!1),m=async()=>{if(!t)return;const a=await c.detail(t),n=a.Data||a;i(n)};r.useEffect(()=>{m()},[t]);const d=async()=>{t&&await c.markRead(t)},p=async()=>{var o;if(!t)return;const a=await c.toggleFav(t),n=((o=a.Data)==null?void 0:o.fav)??a.fav;x(n)};return s.jsxs("div",{children:[s.jsx(g,{title:"公告详情",subtitle:(e==null?void 0:e.title)||""}),s.jsxs(f,{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[s.jsx("span",{className:`px-2 py-1 rounded-full ${(e==null?void 0:e.severity)==="EMERGENCY"?"bg-rose-100 text-rose-700":(e==null?void 0:e.severity)==="WARNING"?"bg-amber-100 text-amber-700":"bg-slate-100 text-slate-600"}`,children:e==null?void 0:e.severity}),(e==null?void 0:e.pinned)&&s.jsx("span",{className:"px-2 py-1 rounded-full bg-indigo-100 text-indigo-700",children:"置顶"}),s.jsx("span",{className:"text-slate-400",children:e==null?void 0:e.scope}),s.jsx("span",{className:"text-slate-400",children:e?new Date(e.publishAt).toLocaleString():""})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{className:"px-3 py-1 bg-slate-100 text-slate-700 rounded-lg",onClick:d,children:"标记已读"}),s.jsx("button",{className:`px-3 py-1 rounded-lg ${l?"bg-rose-500 text-white":"bg-indigo-600 text-white"}`,onClick:p,children:l?"取消收藏":"收藏"})]})]}),s.jsx("div",{className:"mt-6 prose max-w-none",dangerouslySetInnerHTML:{__html:(e==null?void 0:e.html)||""}})]})]})}export{b as default};
