import{c as z,r as i,u as I,j as e,L as N,m as c,G as A,B as E,U as M,A as H}from"./index-742c88f7.js";import{S as P}from"./sparkles-9df1855e.js";import{L as U}from"./lock-01e6703c.js";import{C as _}from"./circle-check-135a219a.js";import{C as B}from"./circle-alert-dad2e7a8.js";import{A as G}from"./arrow-right-797056f3.js";import{E as $}from"./external-link-ba10794c.js";/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]],q=z("github",T),F="/assets/Login1-61c194fc.jpg",R="/assets/Login2-372174d4.jpg",D="/assets/Login3-e3ddc8a0.jpg",O="/assets/Login4-7c296c36.jpg",Z=()=>{const[m,y]=i.useState(""),[g,S]=i.useState(""),[d,x]=i.useState(null),[u,h]=i.useState(!1),k=I(),n=i.useMemo(()=>[F,R,D,O],[]),[o,p]=i.useState(0),[f,b]=i.useState(!1),[L,j]=i.useState(()=>Array(n.length).fill(!1)),w=typeof window<"u"&&window.matchMedia("(max-width: 768px)").matches;i.useEffect(()=>{if(f||w)return;const t=setInterval(()=>{p(s=>(s+1)%n.length)},5e3);return()=>clearInterval(t)},[f,w,n.length]),i.useEffect(()=>{const t=(o+1)%n.length,s=new Image;s.src=n[t],s.onload=()=>j(l=>{const a=[...l];return a[t]=!0,a})},[o,n]);const C=async t=>{var s,l;t.preventDefault(),x(null),h(!0);try{const a=await H.login({username:m,password:g}),v=((s=a.data)==null?void 0:s.token)||a.token,r=((l=a.data)==null?void 0:l.user)||a.user;if(!v||!r)throw new Error("invalid_response");localStorage.setItem("token",v),r.id&&localStorage.setItem("id",String(r.id)),r.role&&localStorage.setItem("role",String(r.role)),x({type:"success",text:"登录成功！正在进入工作台..."}),k("/")}catch{x({type:"error",text:"账号或密码错误，请重试！"})}finally{h(!1)}};return e.jsxs("div",{className:"min-h-screen w-full flex overflow-hidden bg-slate-900",children:[e.jsxs("div",{className:"hidden lg:block lg:w-2/3 relative",onMouseEnter:()=>b(!0),onMouseLeave:()=>b(!1),children:[n.map((t,s)=>e.jsx("img",{src:t,alt:"ScholarHub Background",className:`absolute inset-0 w-full h-full object-cover transition-opacity duration-700 ${o===s?"opacity-100":"opacity-0"}`,loading:"lazy",onLoad:()=>j(l=>{const a=[...l];return a[s]=!0,a})},s)),!L[o]&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx(N,{className:"h-10 w-10 text-indigo-300 animate-spin"})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-indigo-900/90 to-slate-900/50"}),e.jsxs("div",{className:"relative z-10 h-full flex flex-col justify-center px-20 text-white",children:[e.jsxs(c.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},transition:{duration:.8},children:[e.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[e.jsx("div",{className:"p-3 bg-white/10 backdrop-blur-md rounded-2xl border border-white/20",children:e.jsx(A,{className:"w-10 h-10 text-indigo-300"})}),e.jsx("h2",{className:"text-3xl font-bold tracking-wider text-indigo-200",children:"USST"})]}),e.jsxs("h1",{className:"text-5xl font-bold leading-tight mb-6",children:["让知识在沪江之畔",e.jsx("br",{}),e.jsx("span",{className:"text-indigo-400",children:"自由流动"})]}),e.jsx("p",{className:"text-lg text-indigo-200/80 max-w-md mb-12",children:"连接全校师生，打破信息壁垒。ScholarHub 是您专属的学术资源共享与答疑社区。"}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 text-indigo-100",children:[e.jsx("div",{className:"p-2 bg-indigo-500/30 rounded-full",children:e.jsx(E,{size:20})}),e.jsx("span",{children:"海量专业课程资源共享"})]}),e.jsxs("div",{className:"flex items-center gap-3 text-indigo-100",children:[e.jsx("div",{className:"p-2 bg-indigo-500/30 rounded-full",children:e.jsx(P,{size:20})}),e.jsx("span",{children:"实时师生在线答疑互动"})]})]})]}),e.jsx("div",{className:"absolute bottom-10 left-20 flex items-center gap-2",children:n.map((t,s)=>e.jsx("button",{onClick:()=>p(s),className:`h-2.5 w-2.5 rounded-full transition-all ${o===s?"bg-indigo-400 w-4":"bg-white/40 hover:bg-white/70"}`,"aria-label":`slide-${s+1}`},s))})]})]}),e.jsxs("div",{className:"w-full lg:w-1/3 flex items-center justify-center p-8 sm:p-12 relative bg-slate-900 lg:bg-transparent",children:[e.jsx("div",{className:"absolute inset-0 overflow-hidden z-0 lg:hidden",children:e.jsx(c.div,{animate:{scale:[1,1.2,1],opacity:[.3,.5,.3]},transition:{duration:10,repeat:1/0},className:"absolute -top-1/2 -right-1/2 w-full h-full bg-indigo-500/20 rounded-full blur-[120px]"})}),e.jsxs(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},className:"relative z-10 w-full max-w-md p-10 bg-white/10 backdrop-blur-xl rounded-3xl border border-white/20 shadow-2xl",children:[e.jsxs("div",{className:"text-left mb-10",children:[e.jsx("h2",{className:"text-3xl font-bold text-white tracking-tight",children:"欢迎回来"}),e.jsx("p",{className:"mt-2 text-indigo-200 text-sm",children:"请输入您的账号密码以继续"})]}),e.jsxs("form",{onSubmit:C,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"group space-y-1",children:[e.jsx("label",{className:"text-sm font-medium text-indigo-200 ml-1",children:"账号 / 学号"}),e.jsxs("div",{className:"relative transition-all",children:[e.jsx(M,{className:"absolute left-4 top-3.5 h-5 w-5 text-indigo-400 group-focus-within:text-indigo-300 transition-colors"}),e.jsx("input",{type:"text",value:m,onChange:t=>y(t.target.value),required:!0,className:"w-full pl-11 pr-4 py-3 bg-white/5 border border-indigo-300/30 rounded-xl text-white focus:bg-white/10 focus:border-indigo-400 outline-none transition-all placeholder:text-indigo-400/50",placeholder:"请输入用户名"})]})]}),e.jsxs("div",{className:"group space-y-1",children:[e.jsxs("div",{className:"flex justify-between items-center ml-1",children:[e.jsx("label",{className:"text-sm font-medium text-indigo-200",children:"密码"}),e.jsx("a",{href:"/forgot-password",className:"text-xs text-indigo-400 hover:text-indigo-300 font-medium transition-colors",children:"忘记密码？"})]}),e.jsxs("div",{className:"relative transition-all",children:[e.jsx(U,{className:"absolute left-4 top-3.5 h-5 w-5 text-indigo-400 group-focus-within:text-indigo-300 transition-colors"}),e.jsx("input",{type:"password",value:g,onChange:t=>S(t.target.value),required:!0,className:"w-full pl-11 pr-4 py-3 bg-white/5 border border-indigo-300/30 rounded-xl text-white focus:bg-white/10 focus:border-indigo-400 outline-none transition-all placeholder:text-indigo-400/50",placeholder:"••••••••"})]})]})]}),d&&e.jsxs(c.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:`p-3 rounded-lg flex items-center gap-2 text-sm font-medium ${d.type==="success"?"bg-green-500/20 text-green-300 border border-green-500/30":"bg-red-500/20 text-red-300 border border-red-500/30"}`,children:[d.type==="success"?e.jsx(_,{size:18}):e.jsx(B,{size:18}),d.text]}),e.jsx(c.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"submit",disabled:u,className:"w-full py-3.5 px-4 bg-indigo-600 hover:bg-indigo-500 text-white rounded-xl font-bold shadow-lg shadow-indigo-500/30 disabled:opacity-70 disabled:cursor-not-allowed flex items-center justify-center gap-2 transition-all",children:u?e.jsxs(e.Fragment,{children:[e.jsx(N,{className:"animate-spin h-5 w-5"}),e.jsx("span",{children:"验证中..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"立即登录"}),e.jsx(G,{className:"h-5 w-5"})]})}),e.jsxs("div",{className:"text-center text-sm text-indigo-300/80",children:["还没有账号？",e.jsx("a",{href:"/register",className:"text-indigo-400 font-semibold hover:text-indigo-300 hover:underline ml-1 transition-colors",children:"立即注册"})]})]})]}),e.jsxs("div",{className:"absolute bottom-8 w-full flex flex-col md:flex-row items-center justify-center gap-4 text-xs text-slate-600",children:[e.jsx("span",{children:"© 2025 ScholarHub USST"}),e.jsx("span",{className:"hidden md:inline w-px h-3 bg-slate-700"}),e.jsxs("a",{href:"https://github.com/Besokus/ScholarHub",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1.5 text-slate-500 hover:text-white transition-colors group cursor-pointer",children:[e.jsx(q,{size:14,className:"group-hover:scale-110 transition-transform"}),e.jsx("span",{children:"Star on GitHub"}),e.jsx($,{size:10,className:"opacity-0 group-hover:opacity-100 transition-opacity -translate-y-0.5"})]})]})]})]})};export{Z as default};
