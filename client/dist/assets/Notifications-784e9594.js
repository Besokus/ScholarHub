import{r,N as c,u as x,j as e}from"./index-5b5873b3.js";import{P as m,C as d}from"./Card-b7aee7e0.js";function h(){const[s,i]=r.useState([]),a=r.useRef(null),t=async()=>{try{const n=await c.unreadAnswers();i(n.items)}catch{}};r.useEffect(()=>(t(),a.current=window.setInterval(t,3e4),()=>{a.current&&window.clearInterval(a.current)}),[]);const l=async n=>{try{await c.markRead(n)}catch{}i(o=>o.filter(u=>u.id!==n))};return{unread:s,count:s.length,markRead:l}}function N(){const{unread:s,markRead:i}=h(),a=x();return e.jsxs("div",{children:[e.jsx(m,{title:"通知提醒",subtitle:"教师回答与系统消息"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center justify-end",children:e.jsx("button",{className:"px-3 py-1 bg-indigo-600 text-white rounded-lg text-sm",onClick:async()=>{try{await c.readAll()}catch{}},children:"全部标记已读"})}),s.map(t=>e.jsx(d,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-800",children:t.title}),e.jsx("div",{className:"text-sm text-gray-500 mt-1",children:new Date(t.createdAt).toLocaleString()})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{className:"px-3 py-1 bg-indigo-600 text-white rounded-lg",onClick:()=>{i(t.id),a(`/student/qa/${t.questionId}`)},children:"查看"})})]})},t.id)),s.length===0&&e.jsx(d,{className:"p-6",children:e.jsx("div",{className:"text-gray-600",children:"暂无未读通知"})})]})]})}export{N as default};
