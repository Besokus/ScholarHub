import{c as m,d as M,r as l,j as e,C as b,b as x,m as d,M as A,Q as L}from"./index-742c88f7.js";import{P as $}from"./Pagination-1c3acbf2.js";import{R as q}from"./RichText-8c20a8cd.js";import{M as Q,C as _}from"./message-circle-38b95ebc.js";import{F as E}from"./funnel-77631c1c.js";import{A as P}from"./index-7dbfdcd6.js";import{C as v}from"./circle-check-135a219a.js";import{C as N}from"./clock-a684511e.js";import{Z as R}from"./zap-d32f4ce6.js";import"./chevron-left-0e1b0896.js";import"./eye-6021bed5.js";/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],c=m("flame",T);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],H=m("hash",F);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],I=m("plus",D),V=()=>e.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-100 shadow-sm animate-pulse flex gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-slate-100 rounded-full shrink-0"}),e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsx("div",{className:"h-5 bg-slate-100 rounded w-3/4"}),e.jsx("div",{className:"h-16 bg-slate-50 rounded w-full"}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx("div",{className:"h-4 w-12 bg-slate-100 rounded"}),e.jsx("div",{className:"h-4 w-12 bg-slate-100 rounded"})]})]})]}),Z=({tab:i})=>e.jsxs("div",{className:"flex flex-col items-center justify-center py-16 bg-white rounded-2xl border border-dashed border-slate-200 text-center",children:[e.jsx("div",{className:"p-4 bg-slate-50 rounded-full mb-4 ring-1 ring-slate-100",children:i==="unanswered"?e.jsx(v,{size:32,className:"text-emerald-300"}):e.jsx(A,{size:32,className:"text-slate-300"})}),e.jsx("h3",{className:"text-slate-900 font-bold text-lg",children:i==="unanswered"?"所有问题都已解决！":"暂时没有相关讨论"}),e.jsx("p",{className:"text-slate-500 text-sm mt-2 max-w-xs mx-auto",children:i==="unanswered"?"你也来提一个有挑战性的问题吧？":"成为第一个发起话题的人，分享你的见解。"}),e.jsx(x,{to:"/student/qa/publish",className:"mt-6 px-5 py-2.5 bg-indigo-50 text-indigo-600 rounded-xl text-sm font-semibold hover:bg-indigo-100 transition-colors",children:"发起提问"})]});function te(){M();const[i,y]=l.useState([]),[t,w]=l.useState("latest"),[n,h]=l.useState(1),r=20,[k,p]=l.useState(!1),[g,u]=l.useState("");l.useEffect(()=>{(async()=>{try{p(!0),u("");const a=await L.list({sort:t,status:t==="unanswered"?"unanswered":"",page:n,pageSize:r});y(a.items)}catch{u("加载失败")}finally{p(!1)}})()},[t,n]);const j=l.useMemo(()=>{let s=[...i];return t==="latest"&&s.sort((a,o)=>o.createdAt-a.createdAt),t==="hot"&&s.sort((a,o)=>o.hot-a.hot),t==="unanswered"&&(s=s.filter(a=>a.status==="open")),s},[i,t]),f=j.slice((n-1)*r,n*r),z=[{id:"latest",label:"最新动态",icon:N},{id:"hot",label:"热门讨论",icon:c},{id:"unanswered",label:"等待解答",icon:_}],C={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05}}},S={hidden:{y:20,opacity:0},visible:{y:0,opacity:1}};return e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 min-h-screen",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between gap-6 mb-10",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500 font-medium mb-2",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Q,{size:14})," 社区"]}),e.jsx(b,{size:14,className:"opacity-50"}),e.jsx("span",{className:"text-indigo-600",children:"问答广场"})]}),e.jsxs("h1",{className:"text-3xl font-extrabold text-slate-900 tracking-tight flex items-center gap-3",children:["问答社区",e.jsx("span",{className:"px-3 py-1 rounded-full bg-slate-100 text-slate-500 text-xs font-semibold tracking-wide border border-slate-200",children:"Community"})]}),e.jsx("p",{className:"mt-2 text-slate-500 max-w-xl",children:"遇到难题？在这里提问，与同学们一起探讨解决方案。"})]}),e.jsxs(x,{to:"/student/qa/publish",className:"flex items-center gap-2 px-6 py-3 bg-indigo-600 hover:bg-indigo-700 active:scale-95 text-white rounded-xl font-bold shadow-lg shadow-indigo-200 transition-all group",children:[e.jsx(I,{size:20,className:"group-hover:rotate-90 transition-transform"}),e.jsx("span",{children:"发布问题"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8 items-start",children:[e.jsxs("div",{className:"lg:col-span-8 xl:col-span-9 space-y-6",children:[e.jsx("div",{className:"bg-white rounded-2xl p-2 shadow-sm border border-slate-100 flex items-center justify-between sticky top-4 z-20 backdrop-blur-md bg-white/90",children:e.jsx("div",{className:"flex items-center p-1 bg-slate-100/50 rounded-xl overflow-x-auto w-full scrollbar-hide",children:z.map(s=>e.jsxs("button",{onClick:()=>{w(s.id),h(1)},className:`
                     relative flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-all whitespace-nowrap flex-1 justify-center md:flex-none
                     ${t===s.id?"text-indigo-600":"text-slate-500 hover:text-slate-700 hover:bg-slate-200/50"}
                   `,children:[t===s.id&&e.jsx(d.div,{layoutId:"activeQaTab",className:"absolute inset-0 bg-white rounded-lg shadow-sm -z-10 ring-1 ring-black/5"}),e.jsx(s.icon,{size:16,className:t===s.id?"text-indigo-500":"opacity-70"}),s.label]},s.id))})}),e.jsxs("div",{className:"min-h-[400px]",children:[g&&e.jsxs("div",{className:"bg-rose-50 text-rose-600 p-4 rounded-xl flex items-center gap-2 mb-4 border border-rose-100",children:[e.jsx(E,{size:18})," ",g]}),k?e.jsx("div",{className:"space-y-4",children:[1,2,3,4].map(s=>e.jsx(V,{},s))}):f.length>0?e.jsx(d.div,{variants:C,initial:"hidden",animate:"visible",className:"space-y-4",children:e.jsx(P,{mode:"popLayout",children:f.map(s=>e.jsx(d.div,{layout:!0,variants:S,children:e.jsx(x,{to:`/student/qa/${s.id}`,className:"block group",children:e.jsxs("div",{className:"bg-white p-4 rounded-2xl border border-slate-100 shadow-sm hover:shadow-md hover:border-indigo-100 transition-all duration-300 relative overflow-hidden",children:[e.jsx("div",{className:`absolute left-0 top-0 bottom-0 w-1 ${s.status==="open"?"bg-amber-400":"bg-emerald-400"}`}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center text-lg font-bold shrink-0 shadow-inner
                              ${s.status==="open"?"bg-amber-50 text-amber-600":"bg-emerald-50 text-emerald-600"}
                            `,children:s.status==="open"?"?":e.jsx(v,{size:24})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex justify-between items-start gap-4",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-800 leading-snug group-hover:text-indigo-600 transition-colors line-clamp-1",children:s.title}),e.jsxs("div",{className:"flex items-center gap-1 text-xs font-mono text-slate-400 shrink-0 bg-slate-50 px-2 py-1 rounded-lg",children:[e.jsx(N,{size:12}),new Date(s.createdAt).toLocaleDateString()]})]}),e.jsxs("div",{className:"mt-3 relative",children:[e.jsx("div",{className:"text-sm text-slate-600 leading-relaxed max-h-[3em] overflow-hidden",children:e.jsx("div",{className:"pointer-events-none opacity-80 mix-blend-multiply",children:e.jsx(q,{value:s.contentHTML||s.content,readOnly:!0})})}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-8 bg-gradient-to-t from-white to-transparent pointer-events-none"})]}),e.jsxs("div",{className:"mt-4 flex items-center justify-between pt-3 border-t border-slate-50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`inline-flex items-center gap-1 px-2.5 py-1 rounded-lg text-xs font-medium 
                                    ${s.status==="open"?"bg-amber-50 text-amber-700":"bg-emerald-50 text-emerald-700"}
                                  `,children:s.status==="open"?"待回答":"已解决"}),s.hot>100&&e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-lg text-xs font-medium bg-rose-50 text-rose-600",children:[e.jsx(c,{size:12})," 热门"]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-400 font-medium",children:[e.jsxs("span",{className:"flex items-center gap-1 group-hover:text-rose-500 transition-colors",children:[e.jsx(c,{size:14,className:s.hot>50?"text-rose-400":""})," ",s.hot," 热度"]}),e.jsxs("span",{className:"flex items-center gap-1 group-hover:text-indigo-600 transition-colors",children:["点击查看详情 ",e.jsx(b,{size:12})]})]})]})]})]})]})})},s.id))})}):e.jsx(Z,{tab:t})]}),e.jsx("div",{className:"flex justify-center pt-4 pb-8",children:e.jsx($,{page:n,pageSize:r,total:j.length,onChange:h})})]}),e.jsxs("div",{className:"hidden lg:block lg:col-span-4 xl:col-span-3 space-y-6 sticky top-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-indigo-900 to-slate-900 rounded-2xl p-6 text-white shadow-xl relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/5 rounded-full blur-3xl -mr-16 -mt-16"}),e.jsxs("h3",{className:"font-bold text-lg mb-4 flex items-center gap-2",children:[e.jsx(R,{size:18,className:"text-yellow-400"})," 提问技巧"]}),e.jsxs("ul",{className:"space-y-3 text-sm text-indigo-100/80",children:[e.jsxs("li",{className:"flex gap-2",children:[e.jsx("span",{className:"text-yellow-400/80",children:"•"})," 标题简明扼要，突出重点"]}),e.jsxs("li",{className:"flex gap-2",children:[e.jsx("span",{className:"text-yellow-400/80",children:"•"})," 详细描述问题背景和复现步骤"]}),e.jsxs("li",{className:"flex gap-2",children:[e.jsx("span",{className:"text-yellow-400/80",children:"•"})," 善用代码块和图片辅助说明"]}),e.jsxs("li",{className:"flex gap-2",children:[e.jsx("span",{className:"text-yellow-400/80",children:"•"})," 保持礼貌，感谢他人的帮助"]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-5 shadow-sm border border-slate-100",children:[e.jsxs("h4",{className:"font-bold text-slate-800 text-sm mb-4 flex items-center gap-2",children:[e.jsx(H,{size:16,className:"text-indigo-500"})," 热门话题"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["C++","Java","数据结构","考研","前端","算法"].map(s=>e.jsxs("span",{className:"px-3 py-1.5 bg-slate-50 hover:bg-indigo-50 text-slate-600 hover:text-indigo-600 rounded-lg text-xs font-medium cursor-pointer transition-colors",children:["#",s]},s))})]}),e.jsx("div",{className:"text-center",children:e.jsx("span",{className:"text-xs text-slate-400",children:"© 2025 ScholarHub Community"})})]})]})]})}export{te as default};
