## 后置条件检查
- 确认 Linux PostgreSQL 可远程访问：`listen_addresses='*'`、`pg_hba.conf` 允许 `0.0.0.0/0 md5`，防火墙开放 `5432`。
- 核对后端 `.env`：`DATABASE_URL` 指向 Linux PostgreSQL，`JWT_SECRET`、`ADMIN_PASSWORD`、`ADMIN_EMAIL` 已设置。
- 当前代码中的路由：登录校验处于 `server/src/routes/auth.ts:58`；路由挂载为 `app.use('/api/auth', authRouter)`。

## 后端启动与验证
- 生成并应用数据库结构：
  - 执行 `npx prisma generate`。
  - 首次或变更后执行迁移：`npx prisma migrate deploy`（或开发环境 `npx prisma migrate dev --name init`）。
- 避免 ts-node 运行时崩溃，使用编译后启动：
  - 编译：`cd server && npx tsc`。
  - 启动：`node dist/index.js`。
- 端到端接口验证：
  - 注册学生/教师：`POST http://localhost:3000/api/auth/register`（管理员注册应返回 403）。
  - 登录获取令牌：`POST http://localhost:3000/api/auth/login` → 返回 `{ token, user }`。
  - 用令牌获取个人信息：`GET http://localhost:3000/api/auth/me`，请求头 `Authorization: Bearer <token>`。
- 观察日志：启动后应打印 `Server is running on http://localhost:3000`，如首次启动会自动创建默认管理员。

## 前端启动与验证
- 启动 Vite：`cd client && npm run dev`，访问 `http://localhost:5173`。
- 在“注册”页面测试学生/教师注册：`client/src/pages/Register.tsx` 使用 `http://localhost:3000/api/auth/register`。
- 在“登录”页面测试登录：`client/src/pages/Login.tsx` 调用 `http://localhost:3000/api/auth/login`，登录成功后写入 `localStorage.token`。
- 验证用户信息：登录后在前端用 `token` 请求 `/api/auth/me`，检查展示的 `username/role/email`。

## 路由与跨域检查
- 前端使用 `BrowserRouter`（`client/src/App.tsx`），Vite 开发模式默认支持 SPA 路由，不应出现路径 404。
- 后端已启用 CORS：`app.use(cors())`，允许前端 `5173` 端口调用后端 `3000` 端口。
- 确认前端 API 基址为 `http://localhost:3000`（已在 Login/Register 中硬编码）。如需环境化，可后续改为环境变量。

## 常见问题与修复策略
- 若后端 `npm run dev` 仍因 Prisma/ts-node 崩溃：
  - 临时改用编译后启动（`tsc` + `node dist/index.js`）。
  - 确认 Node 版本与 `@prisma/client@7` 兼容，必要时重装依赖：`rm -rf node_modules && npm i`。
- 若前端报 `HTTP 404`：
  - 确认访问的是 `http://localhost:5173/` 根路径或由前端路由可达的页面。
  - 网络面板检查静态资源与 API 请求是否 404，区分前端路由问题与后端接口路径问题。
- 若 Windows → Linux 数据库连接异常：再次确认 `postgresql.conf`、`pg_hba.conf` 与防火墙开放规则。

## 验证输出与交付
- 完成后端与前端启动后，给出：
  - 可用的前端地址：`http://localhost:5173`。
  - 成功注册/登录的示例响应与 `localStorage.token` 验证截图要点。
  - 后端日志确认信息（服务地址、默认管理员创建提示）。

请确认以上计划，我将立即按步骤启动服务并进行端到端验证。